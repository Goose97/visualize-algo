{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar DEFAULT_DURATION = 1500;\nexport var Instructions = /*#__PURE__*/function () {\n  //@ts-ignore\n  function Instructions() {\n    _classCallCheck(this, Instructions);\n\n    _defineProperty(this, \"instructions\", void 0);\n\n    _defineProperty(this, \"duration\", void 0);\n\n    _defineProperty(this, \"buffer\", void 0);\n\n    this.instructions = [];\n    this.duration = DEFAULT_DURATION;\n    this.initNewBuffer();\n  }\n\n  _createClass(Instructions, [{\n    key: \"initNewBuffer\",\n    value: function initNewBuffer() {\n      // hold instruction which are not commited to instruction list\n      this.buffer = {\n        actions: {},\n        duration: this.duration\n      };\n    }\n  }, {\n    key: \"pushActionsAndEndStep\",\n    value: function pushActionsAndEndStep(assign, actions) {\n      this.pushActions(assign, actions);\n      this.endStep();\n    }\n  }, {\n    key: \"pushActions\",\n    value: function pushActions(assign, actions) {\n      var oldActionOfThisAssignee = this.buffer.actions[assign];\n\n      if (oldActionOfThisAssignee) {\n        oldActionOfThisAssignee.push.apply(oldActionOfThisAssignee, _toConsumableArray(actions));\n      } else {\n        this.buffer.actions[assign] = _toConsumableArray(actions);\n      }\n    }\n  }, {\n    key: \"endStep\",\n    value: function endStep() {\n      this.instructions.push(this.buffer);\n      this.initNewBuffer();\n    }\n  }, {\n    key: \"setCodeLine\",\n    value: function setCodeLine(codeLine) {\n      this.buffer.codeLine = codeLine;\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      return this.instructions;\n    }\n  }, {\n    key: \"setDuration\",\n    value: function setDuration(duration) {\n      this.duration = duration;\n    }\n  }]);\n\n  return Instructions;\n}();","map":null,"metadata":{},"sourceType":"module"}